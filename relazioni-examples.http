### ============================================
### RELAZIONE 1:1 - Users ↔ UserProfiles
### ============================================

### 1. Crea un nuovo utente
POST http://localhost:3000/users
Content-Type: application/json

{
  "username": "mario_rossi",
  "email": "mario.rossi@example.com",
  "password": "password123",
  "isActive": true
}

### 2. Crea un altro utente
POST http://localhost:3000/users
Content-Type: application/json

{
  "username": "giulia_bianchi",
  "email": "giulia.bianchi@example.com",
  "password": "secure456"
}

### 3. Ottieni tutti gli utenti (con profili se esistono)
GET http://localhost:3000/users

### 4. Crea un profilo per il primo utente (userId: 1)
POST http://localhost:3000/user-profiles
Content-Type: application/json

{
  "userId": 1,
  "firstName": "Mario",
  "lastName": "Rossi",
  "dateOfBirth": "1990-05-15",
  "phoneNumber": "+39 333 1234567",
  "bio": "Sviluppatore software appassionato di tecnologia e innovazione",
  "avatarUrl": "https://example.com/avatars/mario.jpg"
}

### 5. Crea un profilo per il secondo utente (userId: 2)
POST http://localhost:3000/user-profiles
Content-Type: application/json

{
  "userId": 2,
  "firstName": "Giulia",
  "lastName": "Bianchi",
  "dateOfBirth": "1995-08-22",
  "phoneNumber": "+39 345 9876543",
  "bio": "Designer UX/UI e content creator"
}

### 6. Tentativo di creare un SECONDO profilo per lo stesso utente (ERRORE - Relazione 1:1)
POST http://localhost:3000/user-profiles
Content-Type: application/json

{
  "userId": 1,
  "firstName": "Altro",
  "lastName": "Profilo"
}

### 7. Ottieni utente con il suo profilo
GET http://localhost:3000/users/1

### 8. Ottieni profilo tramite userId
GET http://localhost:3000/user-profiles/user/1

### 9. Aggiorna profilo utente
PATCH http://localhost:3000/user-profiles/1
Content-Type: application/json

{
  "bio": "Senior Full Stack Developer specializzato in NestJS e React",
  "phoneNumber": "+39 333 1111111"
}

### 10. Ottieni tutti i profili
GET http://localhost:3000/user-profiles


### ============================================
### RELAZIONE 1:N - Courses → CourseLessons
### ============================================

### 11. Crea un nuovo corso
POST http://localhost:3000/courses
Content-Type: application/json

{
  "name": "JavaScript Fundamentals",
  "description": "Corso completo sui fondamenti di JavaScript",
  "code": "JS101",
  "credits": 6,
  "maxStudents": 30,
  "isActive": true
}

### 12. Crea un altro corso
POST http://localhost:3000/courses
Content-Type: application/json

{
  "name": "TypeScript Advanced",
  "description": "Corso avanzato su TypeScript e pattern OOP",
  "code": "TS201",
  "credits": 8,
  "maxStudents": 25,
  "isActive": true
}

### 13. Crea la prima lezione per JavaScript Fundamentals (courseId: 1)
POST http://localhost:3000/course-lessons
Content-Type: application/json

{
  "courseId": 1,
  "title": "Introduzione al JavaScript",
  "description": "Una panoramica completa sui concetti base di JavaScript e la sua storia",
  "type": "video",
  "videoUrl": "https://example.com/lessons/js-intro.mp4",
  "orderIndex": 1,
  "durationMinutes": 45,
  "isActive": true
}

### 14. Crea la seconda lezione per lo STESSO corso (Relazione 1:N - OK!)
POST http://localhost:3000/course-lessons
Content-Type: application/json

{
  "courseId": 1,
  "title": "Variabili e Tipi di Dati",
  "description": "Approfondimento su var, let, const e tipi primitivi in JavaScript",
  "type": "video",
  "videoUrl": "https://example.com/lessons/js-variables.mp4",
  "orderIndex": 2,
  "durationMinutes": 60
}

### 15. Crea la terza lezione - tipo TEXT
POST http://localhost:3000/course-lessons
Content-Type: application/json

{
  "courseId": 1,
  "title": "Operatori e Espressioni",
  "description": "Guida completa agli operatori aritmetici, logici e di confronto",
  "type": "text",
  "content": "## Operatori in JavaScript\n\n### Operatori Aritmetici\n- Addizione (+)\n- Sottrazione (-)\n- Moltiplicazione (*)\n...",
  "orderIndex": 3,
  "durationMinutes": 30
}

### 16. Crea la quarta lezione - tipo QUIZ
POST http://localhost:3000/course-lessons
Content-Type: application/json

{
  "courseId": 1,
  "title": "Quiz: Concetti Base",
  "description": "Verifica le tue conoscenze sui concetti fondamentali",
  "type": "quiz",
  "content": "{\"questions\": [{\"id\": 1, \"question\": \"Qual è la differenza tra let e var?\", \"options\": [\"A\", \"B\", \"C\"], \"correct\": \"A\"}]}",
  "orderIndex": 4,
  "durationMinutes": 15
}

### 17. Crea la quinta lezione - tipo ASSIGNMENT
POST http://localhost:3000/course-lessons
Content-Type: application/json

{
  "courseId": 1,
  "title": "Esercizio: Calcolatrice",
  "description": "Crea una semplice calcolatrice in JavaScript",
  "type": "assignment",
  "content": "**Obiettivo**: Crea una calcolatrice che supporti le 4 operazioni base.\n\n**Requisiti**:\n1. Usa le funzioni\n2. Gestisci errori\n3. Testing",
  "orderIndex": 5,
  "durationMinutes": 120
}

### 18. Crea lezioni per il SECONDO corso (TypeScript) - Relazione 1:N
POST http://localhost:3000/course-lessons
Content-Type: application/json

{
  "courseId": 2,
  "title": "TypeScript: Introduzione e Setup",
  "description": "Come configurare un progetto TypeScript da zero",
  "type": "video",
  "videoUrl": "https://example.com/lessons/ts-setup.mp4",
  "orderIndex": 1,
  "durationMinutes": 40
}

### 19. Aggiungi un'altra lezione al corso TypeScript
POST http://localhost:3000/course-lessons
Content-Type: application/json

{
  "courseId": 2,
  "title": "Tipi Avanzati e Generics",
  "description": "Approfondimento sui tipi avanzati di TypeScript",
  "type": "video",
  "videoUrl": "https://example.com/lessons/ts-generics.mp4",
  "orderIndex": 2,
  "durationMinutes": 75
}

### 20. Ottieni TUTTE le lezioni del corso JavaScript (courseId: 1)
GET http://localhost:3000/course-lessons/course/1

### 21. Ottieni TUTTE le lezioni del corso TypeScript (courseId: 2)
GET http://localhost:3000/course-lessons/course/2

### 22. Ottieni TUTTE le lezioni (di tutti i corsi)
GET http://localhost:3000/course-lessons

### 23. Ottieni un corso specifico CON tutte le sue lezioni
GET http://localhost:3000/courses/1

### 24. Aggiorna l'ordine di una lezione
PATCH http://localhost:3000/course-lessons/3
Content-Type: application/json

{
  "orderIndex": 10
}

### 25. Aggiorna il contenuto di una lezione
PATCH http://localhost:3000/course-lessons/4
Content-Type: application/json

{
  "title": "Quiz: Test Finale Modulo 1",
  "description": "Verifica completa del primo modulo",
  "durationMinutes": 20
}

### 26. Disattiva una lezione
PATCH http://localhost:3000/course-lessons/5
Content-Type: application/json

{
  "isActive": false
}

### 27. Ottieni dettaglio di una singola lezione
GET http://localhost:3000/course-lessons/1

### 28. Elimina una lezione
DELETE http://localhost:3000/course-lessons/6


### ============================================
### VERIFICA RELAZIONI
### ============================================

### 29. Verifica User con Profile (1:1)
GET http://localhost:3000/users/1

### 30. Verifica Course con Lessons (1:N)
GET http://localhost:3000/courses/1

### 31. Tenta di creare profilo duplicato (DEVE FALLIRE)
POST http://localhost:3000/user-profiles
Content-Type: application/json

{
  "userId": 1,
  "firstName": "Test",
  "lastName": "Duplicato"
}

### 32. Crea MOLTE lezioni per un corso (DEVE FUNZIONARE - Relazione 1:N)
POST http://localhost:3000/course-lessons
Content-Type: application/json

{
  "courseId": 1,
  "title": "Lezione Extra #1",
  "description": "Contenuto aggiuntivo",
  "type": "text",
  "content": "Testo della lezione",
  "orderIndex": 20,
  "durationMinutes": 25
}
